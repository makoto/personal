(function(e){function i(i,t){if(0===i.indexOf("#"))e(i).clone(!0).appendTo(n.empty()).show();else{if(t){var a=e("<iframe />").attr({src:i,frameborder:0,hspace:0}).css({width:"100%",height:"100%"});n.html(a)}else n.load(i);n.data("localEl",!1)}}function t(e,i){var t=n.outerWidth(!0),a={},l={};if(!n.is(":visible")&&!s){switch(s=!0,e){case"left":n.css({left:"auto",right:"-"+t+"px"}),a["margin-left"]="-="+t,l.right="+="+t;break;default:n.css({left:"-"+t+"px",right:"auto"}),a["margin-left"]="+="+t,l.left="+="+t}d.animate(a,i),n.show().animate(l,i,function(){s=!1})}}var a,d=e("body"),n=e("#pageslide"),s=!1;0==n.length&&(n=e("<div />").attr("id","pageslide").css("display","none").appendTo(e("body"))),e.fn.pageslide=function(i){this.click(function(t){var d=e(this),s=e.extend({href:d.attr("href")},i);t.preventDefault(),t.stopPropagation(),n.is(":visible")&&d[0]==a?e.pageslide.close():(e.pageslide(s),a=d[0])})},e.fn.pageslide.defaults={speed:200,direction:"right",modal:!1,iframe:!0,href:null},e.pageslide=function(a){var d=e.extend({},e.fn.pageslide.defaults,a);n.is(":visible")&&n.data("direction")!=d.direction?e.pageslide.close(function(){i(d.href,d.iframe),t(d.direction,d.speed)}):(i(d.href,d.iframe),n.is(":hidden")&&t(d.direction,d.speed)),n.data(d)},e.pageslide.close=function(i){var t=e("#pageslide"),a=t.outerWidth(!0),n=t.data("speed"),l={},o={};if(!t.is(":hidden")&&!s){switch(s=!0,t.data("direction")){case"left":l["margin-left"]="+="+a,o.right="-="+a;break;default:l["margin-left"]="-="+a,o.left="-="+a}t.animate(o,n),d.animate(l,n,function(){t.hide(),s=!1,i!==void 0&&i()})}},n.click(function(e){e.stopPropagation()}),e(document).bind("click keyup",function(i){"keyup"==i.type&&27!=i.keyCode||n.is(":visible")&&!n.data("modal")&&e.pageslide.close()})})(jQuery);
